<!DOCTYPE html>

<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title>Program Record Entry</title>
	<link rel="stylesheet" href="../styles/currentAttendance.css" />
	<link rel="stylesheet" href="../styles/header.css" />
	<link rel="stylesheet" href="../styles/footer.css" />
	<script src="../scripts/js/jspdf.min.js"></script>
	<script src="../scripts/js/my1.js"></script>
	<script src="../scripts/currentAttendanceUP.js"></script>
	
</head>

<body>
	<%- include('../partials/header.ejs')%>

		<div class="entry">
			<div class="entry1">
				<!-- code for archive record -->

				<div id="archive" class="search" style="display:'none'">
					<div class="search1">
						'

						<table class="archive-font">
							<thead>
								<tr class="archive-font">
									<td>S.No</td>
									<td>PSF_ID</td>
									<td>INSTRUCTOR</td>
									<td>PROGRAM</td>
									<td>SECTION</td>
									<td>YEAR</td>
									<td>SUBJECT</td>
									<td>MONTH</td>
									<td>ACTION</td>
								</tr>
							</thead>
							<tbody>
								<% psfData.forEach((row, index)=> { %>
									<% if (row.psf_status==0) { %>
										<tr>
											<td>
												<%= index + 1 %>
											</td>
											<td>
												<%= row.psf_id %>
											</td>
											<td>
												<%= row.faculty_name.toUpperCase() %>
											</td>
											<td>
												<%= row.program_name %>
											</td>
											<td>
												<%= row.class_name %> - <%= row.section_name %>
											</td>
											<td>
												<%= row.year %>
											</td>
											<td>
												<%= row.subject_name %>
											</td>
											<td>
												<select class="selectdate" name="month" id="monthDropdown">
													<% if (row.months) { row.months.split(",").forEach(m=> {
														let year = m.substring(0,4); let month = m.substring(5,7);
														const monthNames = [
														"Jan","Feb","Mar","April","May","June",
														"July","Aug","Sept","Oct","Nov","Dec" ]; let monthName =
														monthNames[parseInt(month)-1]; %>
														<option value="<%= month %>-01">
															<%= monthName %> - <%= year %>
														</option>
														<% }) } else { %>
															<option value="">No Records</option>
															<% } %>
												</select>
											</td>
											<td>
												<form method="POST" action="/printpdf">
													<input type="hidden" name="psfid" value="<%= row.psf_id %>" />
													<input type="hidden" name="pid" value="<%= row.program_id %>" />
													<input type="hidden" name="sname" value="<%= row.subject_name %>" />
													<input name="pname" type="hidden" value="<%= row.pf_name %>" />
													<input name="class_name" type="hidden"
														value="<%= row.class_name %>" />
													<button class="bt1 custom" type="submit">
														Attendance List
													</button>
												</form>
											</td>
										</tr>

										<% } %>
											<% }) %>
							</tbody>
						</table>
					</div>
				</div>

				<!--	code for current date attendance list	-->

				<div class="fbar">
					<%=locals.msg%>
				</div>

				<div class="search">
					<div class="search1">
						<div id="discipline"><%=classData[0].program_name %> - <%=classData[0].class_name%> - <%= classData[0].section_name%></div>
						<button onclick="printpdf()" id="pdfButton">Download as PDF</button>
						<table id="myTable">
							<thead>
								<tr>
									<td>S.No</td>
									<td>Class.No</td>
									<td>Student Name</td>
									<td>Status</td>
								</tr>
							</thead>
							
							
							<% classData.forEach((row, index)=> { %>
								<tbody>
									<tr>
										<td>
										<%=index+1%>
									</td>
									<td>
										<%=row.inter_bs%> - <%=row.class_no%> - <%=row.enroll_year%>
									</td>
									
									<td>
										<%=row.student_name%>
									</td>
									<td>
										<%= row.status %>
									</td>
									
								</tr>
								</tbody>
								<%})%>
							</table>
							
					</div>
				</div>

			</div>
		</div>

		<%- include('../partials/footer.ejs')%>
			<script src="../scripts/dashboardScript.js">
			</script>

</body>

</html>